/* =========================================
   【左侧控制台组件样式规范】：绝对禁止压缩 (Flex Shrink 防御)
========================================= */
.sidebar {
    width: 380px;
    flex-shrink: 0; /* 绝对禁止侧边栏被主内容区挤压变窄，维持系统骨架稳定性 */
    padding: 25px;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
}

.sidebar::-webkit-scrollbar { width: 6px; }
.sidebar::-webkit-scrollbar-thumb { background: rgba(0, 0, 0, 0.2); border-radius: 10px; }

.sidebar-title {
    font-size: 1.5rem; margin-top: 0; margin-bottom: 20px;
    border-bottom: 2px solid rgba(0, 0, 0, 0.1); padding-bottom: 10px;
}

/* =========================================
   2. 文件上传区域 (基于拖拽行为响应式变色)
========================================= */
.upload-area {
    border: 2px dashed rgba(0, 0, 0, 0.2); border-radius: 12px;
    padding: 30px 10px; text-align: center;
    background: rgba(255, 255, 255, 0.3); transition: all 0.3s;
}
.upload-area.is-dragging { border-color: #409eff; background: rgba(64, 158, 255, 0.1); }
.success-area { border-style: solid; border-color: #67c23a; background: rgba(103, 194, 58, 0.1); }

.upload-icon { font-size: 40px; margin-bottom: 10px; }
.upload-btn { display: inline-block; padding: 8px 20px; background: #409eff; color: white; border-radius: 20px; cursor: pointer; font-size: 0.9rem; margin-top: 5px; }
.reupload-btn { background: transparent; color: #909399; border: 1px solid #909399; padding: 4px 12px; border-radius: 12px; cursor: pointer; font-size: 0.8rem; margin-top: 10px; }
.file-name-text { font-size: 0.85rem; word-break: break-all; opacity: 0.8; margin-top: 5px; }

/* =========================================
   3. 动作分发按钮矩阵 (Action Grid)
========================================= */
.glass-btn { width: 100%; padding: 10px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; transition: all 0.3s; backdrop-filter: blur(4px); }
.primary-btn { background: rgba(230, 162, 60, 0.9); color: white; }
.primary-btn:hover { background: rgba(230, 162, 60, 1); transform: translateY(-2px); }
.secondary-btn { background: rgba(144, 147, 153, 0.8); color: white; }
.secondary-btn:hover { background: rgba(144, 147, 153, 1); }

.action-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.action-btn { background: rgba(64, 158, 255, 0.85); color: white; border: 2px solid transparent; }
.action-btn:hover { background: rgba(64, 158, 255, 1); transform: translateY(-2px); }
.active-btn { border-color: #fff; box-shadow: 0 0 10px rgba(255, 255, 255, 0.5); transform: translateY(-2px); }

.danger-btn { background: rgba(245, 108, 108, 0.85); }
.danger-btn:hover { background: rgba(245, 108, 108, 1); }
.danger-btn:disabled { background: rgba(245, 108, 108, 0.4); cursor: not-allowed; transform: none; }

/* 核心特效按键 */
.ai-magic-btn { background: linear-gradient(90deg, #b37feb, #ff85c0); color: white; margin-bottom: 15px; }
.ai-magic-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(179, 127, 235, 0.5); filter: brightness(1.1); }
.pdf-export-btn { background: linear-gradient(90deg, #ff7a45, #ff4d4f); color: white; margin-bottom: 15px; font-weight: bold; border: none; box-shadow: 0 4px 15px rgba(255, 77, 79, 0.4); }
.pdf-export-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(255, 77, 79, 0.6); filter: brightness(1.1); }

.cleanup-btn { background: rgba(245, 108, 108, 0.2); color: #f56c6c; border: 1px dashed #f56c6c; }
.cleanup-btn:hover { background: #f56c6c; color: white; }
.log-toggle-btn { width: 100%; border: 1px solid #52c41a; color: #52c41a; background: rgba(82, 196, 26, 0.05); }
.log-toggle-btn:hover { transform: translateY(-2px); background: rgba(82, 196, 26, 0.15); box-shadow: 0 4px 12px rgba(82, 196, 26, 0.2); }

/* =========================================
   4. 表单多选器 (Checkbox Matrix)
========================================= */
.checkbox-group { display: flex; flex-wrap: wrap; gap: 8px; }
.checkbox-label { padding: 6px 12px; background: rgba(255, 255, 255, 0.6); border: 1px solid rgba(0, 0, 0, 0.1); border-radius: 20px; font-size: 0.85rem; cursor: pointer; transition: border-color 0.2s; }
.checkbox-label:hover { border-color: #409eff; }

.divider { height: 1px; background: rgba(0, 0, 0, 0.1); margin: 15px 0; }
h4 { margin: 0 0 10px 0; font-size: 1rem; }
.mt-2 { margin-top: 10px; } .mt-3 { margin-top: 15px; }
.success-text { color: #52c41a; font-weight: bold; }

/* =========================================
   5. 【架构黑科技】：手搓原生防内存泄漏下拉框 (Dropdown Wrapper)
========================================= */
.custom-dropdown-container { position: relative; width: 100%; }

.custom-select-box {
    width: 100%;
    height: 38px; /* 强制死锁高度！绝对不允许因为内部数据极长而破坏整体排版 */
    padding: 0 12px; border-radius: 8px; border: 1px solid rgba(0, 0, 0, 0.1);
    background: rgba(255, 255, 255, 0.6); cursor: pointer; display: flex;
    justify-content: space-between; align-items: center; font-size: 0.9rem; transition: all 0.3s; box-sizing: border-box;
}
.custom-select-box:hover { border-color: #409eff; }
.custom-select-box.disabled { opacity: 0.6; cursor: not-allowed; background: rgba(0, 0, 0, 0.05); }

/* 强制单行截断，配合 Flexbox 保护箭头图标 */
.custom-select-box span:first-child {
    flex: 1; min-width: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-align: left;
}
.custom-select-box .arrow { flex-shrink: 0; margin-left: 8px; font-size: 0.7rem; transition: transform 0.3s ease; color: #888; }

.custom-options-list {
    position: absolute; top: 100%; left: 0; width: 100%; z-index: 100; margin: 0; padding: 5px 0;
    list-style: none; max-height: 200px; overflow-y: auto; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2), 0 -2px 10px rgba(0, 0, 0, 0.05);
}
.custom-option {
    padding: 8px 15px; cursor: pointer; transition: background 0.2s; font-size: 0.9rem;
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.custom-option:hover { background: rgba(64, 158, 255, 0.15); }
.custom-option.selected { color: #409eff; font-weight: bold; background: rgba(64, 158, 255, 0.05); }

/* 下拉滑动过渡动画 (Transition hook) */
.dropdown-slide-enter-active, .dropdown-slide-leave-active { transition: all 0.25s cubic-bezier(0.25, 0.8, 0.25, 1); transform-origin: top; }
.dropdown-slide-enter-from, .dropdown-slide-leave-to { opacity: 0; transform: scaleY(0.8); }